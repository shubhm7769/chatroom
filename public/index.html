<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Group Chatroom</title>
    <meta name="description" content="Real-time group chatroom with Admin/User roles" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
        rel="stylesheet" />
    <link rel="stylesheet" href="style.css" />
</head>

<body>

    <!-- ============================================ -->
    <!-- JOIN SCREEN                                  -->
    <!-- ============================================ -->
    <div id="join-screen" class="screen active">
        <div class="join-card">
            <div class="glow glow-1"></div>
            <div class="glow glow-2"></div>

            <div class="join-header">
                <div class="logo">ðŸš€</div>
                <h1>Group Chatroom</h1>
                <p class="subtitle">Create or join a room to start chatting</p>
            </div>

            <div class="join-form">
                <!-- Role selection -->
                <label for="role-select">Your Role</label>
                <div class="select-wrapper">
                    <select id="role-select">
                        <option value="admin">ðŸ‘‘ Admin â€” Create a Room</option>
                        <option value="user">ðŸ‘¤ User â€” Join a Room</option>
                    </select>
                </div>

                <!-- Username -->
                <label for="username-input">Display Name</label>
                <input type="text" id="username-input" placeholder="Enter your name" maxlength="20"
                    autocomplete="off" />

                <!-- PIN -->
                <label for="pin-input">Room PIN</label>
                <input type="password" id="pin-input" placeholder="Enter numeric PIN" maxlength="10"
                    autocomplete="off" />

                <!-- Error -->
                <p id="error-msg" class="error-msg"></p>

                <!-- Join button -->
                <button id="join-btn">
                    <span id="join-btn-text">Create Room</span>
                </button>
            </div>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- CHAT SCREEN                                  -->
    <!-- ============================================ -->
    <div id="chat-screen" class="screen">
        <!-- Sidebar: online users -->
        <aside id="sidebar">
            <div class="sidebar-header">
                <h3>ðŸ‘¥ Online</h3>
                <div class="sidebar-header-right">
                    <span id="user-count" class="user-count">0</span>
                    <button id="sidebar-close" class="sidebar-close" title="Close sidebar">âœ•</button>
                </div>
            </div>
            <ul id="user-list">
                <!-- Users appended by JS -->
            </ul>
            <div class="sidebar-footer">
                <span id="my-role-badge" class="role-badge"></span>
                <span id="my-name"></span>
            </div>
        </aside>

        <!-- Main chat area -->
        <div class="chat-main">
            <!-- Header -->
            <header id="chat-header">
                <div class="header-left">
                    <button id="sidebar-toggle" class="sidebar-toggle" title="Toggle members">â˜°</button>
                    <div>
                        <h2>Group Chatroom</h2>
                        <p id="status-text" class="status-text">Connected</p>
                    </div>
                </div>
                <div class="header-right">
                    <span id="online-badge" class="badge">0 online</span>
                </div>
            </header>

            <!-- Messages -->
            <main id="messages-container"></main>

            <!-- Typing indicator -->
            <div id="typing-indicator" class="typing-indicator hidden">
                <span class="dot"></span>
                <span class="dot"></span>
                <span class="dot"></span>
                <span id="typing-name"></span> is typingâ€¦
            </div>

            <!-- Input -->
            <footer id="chat-footer">
                <input type="text" id="msg-input" placeholder="Type a messageâ€¦" autocomplete="off" />
                <button id="send-btn" title="Send message">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" width="20" height="20">
                        <line x1="22" y1="2" x2="11" y2="13"></line>
                        <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                    </svg>
                </button>
            </footer>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>

</html>